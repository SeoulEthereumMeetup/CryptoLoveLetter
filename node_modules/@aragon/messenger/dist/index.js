'use strict';Object.defineProperty(exports,'__esModule',{value:!0}),exports.providers=void 0;var _jsonrpc=require('./jsonrpc'),_jsonrpc2=_interopRequireDefault(_jsonrpc),_MessagePortMessage=require('./providers/MessagePortMessage'),_MessagePortMessage2=_interopRequireDefault(_MessagePortMessage),_WindowMessage=require('./providers/WindowMessage'),_WindowMessage2=_interopRequireDefault(_WindowMessage),_DevMessage=require('./providers/DevMessage'),_DevMessage2=_interopRequireDefault(_DevMessage);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}const providers=exports.providers={MessagePortMessage:_MessagePortMessage2.default,WindowMessage:_WindowMessage2.default,DevMessage:_DevMessage2.default};class Messenger{constructor(a=new _MessagePortMessage2.default){this.provider=a}bus(){return this.provider.messages()}requests(){return this.bus().filter((a)=>!_jsonrpc2.default.isValidResponse(a))}responses(){return this.bus().filter(_jsonrpc2.default.isValidResponse)}sendResponse(a,b){const c=_jsonrpc2.default.encodeResponse(a,b);return this.provider.send(c),c.id}send(a,b=[]){const c=_jsonrpc2.default.encodeRequest(a,b);return this.provider.send(c),c.id}sendAndObserveResponses(a,b=[]){const c=this.send(a,b);return this.responses().filter((a)=>a.id===c)}sendAndObserveResponse(a,b=[]){return this.sendAndObserveResponses(a,b).first()}}exports.default=Messenger;